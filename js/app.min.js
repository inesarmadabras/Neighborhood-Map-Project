var flickrKey="04ae986d31f8a3d5993799e1d88c48c5",ViewModel=function(){var a=this;a.locations=[{name:"Parque da Paz",lat:38.663434,lng:-9.165485,type:"Public Park"},{name:"Miradouro Boca do Vento",lat:38.684681,lng:-9.1588817,type:"Belvedere"},{name:"Casa do Alentejo",lat:38.7158848,lng:-9.1422239,type:"Restaurant"},{name:"Jardim da Estrela",lat:38.715134,lng:-9.1594065,type:"Public Park"},{name:"Miradouro Santa Catarina",lat:38.709626,lng:-9.1474478,type:"Belvederet"},{name:"Foxtrot",lat:38.713905,lng:-9.1518868,type:"Bar"},{name:"Pensão do Amor",lat:38.7072048,lng:-9.1436212,type:"Bar"},{name:"Caleidoscópio",lat:38.7571159,lng:-9.1546839,type:"Study Spot"}],a.nav=ko.observableArray(a.locations),a.filter=ko.observable(""),a.filteredNav=ko.computed(function(){var b=a.filter().toLowerCase();return b?a.nav().filter(function(a){return a.name.toLowerCase().indexOf(b)>-1||a.name.indexOf(b)>-1}):a.nav()}),a.highlightListItem=function(a){var b;"string"==typeof a?b=a:"object"==typeof a&&(b=a.name);var c=$(".mdl-navigation a:contains("+b+")");$(".mdl-navigation a").removeClass("mdl-navigation__link--current"),$(c).addClass("mdl-navigation__link--current")},a.panToLocation=ko.observable(),a.location_array=ko.observableArray(),a.infowindow_array=ko.observableArray(),a.clickListItem=function(b){a.highlightListItem(b),a.panToLocation(b)},a.lat=ko.observable(38.6766764),a.lon=ko.observable(-9.184167),a.flickrApi=ko.observable("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key="+flickrKey+"&safe_search=1&per_page=10&lat="+a.lat()+"&lon="+a.lon()+"&format=json&jsoncallback=?"),a.srcs=ko.observableArray(),a.updateJson=ko.observable()};if("object"==typeof ko){var vm=new ViewModel;ko.applyBindings(vm)}else alert("Error: Knockout.js did not load.Please reload to try again.");initMap=(()=>{function c(a){null!==a.getAnimation()?a.setAnimation(null):(a.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){a.setAnimation(null)},1500))}var a=document.getElementById("map"),b=new google.maps.Map(a,{zoom:13,styles:[{elementType:"geometry",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#263c3f"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#6b9a76"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#38414e"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#212a37"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#9ca5b3"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#746855"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#1f2835"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#f3d19c"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2f3948"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#d59563"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#17263c"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#17263c"}]}],center:{lat:38.6766764,lng:-9.184167},disableDefaultUI:!0}),d=function(){var a=0;for(a;a<vm.locations.length;++a)vm.infowindow_array[a].close()};vm.panToLocation=function(a){var e=a.title?a.title:a.name,f=a.position?a.position.lat():a.lat,g=a.position?a.position.lng():a.lng;b.panTo({lat:f,lng:g}),d();var h=0;for(h;h<vm.locations.length;h++)vm.locations[h].name===e&&(vm.infowindow_array[h].open(b,vm.location_array[h]),vm.lat(vm.locations[h].lat),vm.lon(vm.locations[h].lng),c(vm.location_array[h]));vm.flickrApi("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key="+flickrKey+"&safe_search=1&per_page=10&lat="+vm.lat()+"&lon="+vm.lon()+"&text="+e+"&sort=relevance&format=json&jsoncallback=?"),vm.updateJson()};var e=function(){vm.highlightListItem(this.title),vm.panToLocation(this)},f=function(){vm.updateJson=function(){$.getJSON(vm.flickrApi()).done(function(a){vm.srcs(a)}).fail(function(){alert("Error: Flickr data did not load.Please reload to try again.")})};var a=0;for(a;a<vm.locations.length;a++)vm.location_array[a]=new google.maps.Marker({map:b,position:{lat:vm.locations[a].lat,lng:vm.locations[a].lng},title:vm.locations[a].name,type:vm.locations[a].type,animation:google.maps.Animation.DROP}),vm.infowindow_array[a]=new google.maps.InfoWindow({content:'<h1 class="places">'+vm.locations[a].name+"</h1><br><p>"+vm.locations[a].type+'</p><br><img class="images" src= http://maps.googleapis.com/maps/api/streetview?size=200x100&location='+vm.locations[a].lat+","+vm.locations[a].lng+">"}),vm.location_array[a].addListener("click",e)};f()}),mapError=(()=>{alert("Error: Map data did not load. Please reload to try again.")}),$.ajaxSetup({cache:!0});
